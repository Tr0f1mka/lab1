<h1> Лабораторная работа №1 "Калькулятор" </h1>
<hr>
<p>Программа для решения математических выражений. Были реализованы варианты M2, M3, M4.</p>

<p>Поддерживает следующие операторы и команды:</p>
<ul>
    <li>"+" - сложение </li>
    <li>"-" - вычитание </li>
    <li>"*" - умножение </li>
    <li>"/" - деление </li>
    <li>"//" - целочисленное деление </li>
    <li>"%" - остаток от деления </li>
    <li>"**" - возведение в степень </li>
    <li>"$" - унарный плюс </li>
    <li>"~" - унарный минус </li>
    <li>"(" и ")" - скобки </li>
    <li>"let name = value" - задаёт переменную name со значением value </li>
    <li>"abs(a)" - возвращает модуль a </li>
    <li>"sqrt(a) - возвращает корень a </li>
    <li>"pow(a, b) - возводит a в степень b </li>
    <li>"max(a[, b, ...])" - ищет максимум среди аргументов </li>
    <li>"min(a[, b, ...])" - ищет минимум среди аргументов </li>
    <li>"show_variables" - выводит список переменных </li>
    <li>"infix" - переводит калькулятор в инфиксный режим </li>
    <li>"postfix" - переводит калькулятор в постфиксный режим </li>
    <li>"exit" - завершает работу программы </li>
</ul>
<p>Числа вводятся в формате 123 и 123.45</p>

<p2> Структура </p2>
<ul>
    <li> src - содержит исходный код программы </li>
    <li> main.py - входная точка программы </li>
    <li> tests - содержит тесты функций программы </li>
</ul>

<h2> Описание модулей </h2>
<ul>
     <li>main.py - входная точка программы. Содержит функции объявления переменной и вывода сообщений, через неё пользователь взаимодействует с программой </li>
     <li>decision.py - основной вычислительный модуль. Связывает все функции, необходимые для вычисления выражения. </li>
     <li>parser.py - парсер математических выражений. </li>
     <li>reverse_poland_notation.py - содержит алгоритм для перевода в обратную польскую нотацию по списку токенов. </li>
     <li>calc.py - содержит алгоритм для вычисления решения выражения в обратной польской нотации. </li>
     <li>patterns.py - содержит шаблоны регулярных выражений для остальных модулей. </li>
</ul>

<h2> Алгоритм вычисления выражения(функция decision) </h2>
    <p>На вход подаётся строка с выражением, нотация в логическом типе и словарь переменных. Строка разбивается на токены, затем происходит поиск функций и переменных и замена их на соответствующие значения. Затем выражение переводится в обратную польскую нотацию, проводятся проверки на правильность скобок и выдаётся выражение(если не была возвращена ошибка раньше или на данном моменте).</p>

<h2> Алгоритм парсинга(функция tokens) </h2>
    <p>На вход подаётся строка, которая по шаблону разбивается на числа, операторы, скобки и слова(из букв). Если среди слов есть названия функций, создаётся новый список токенов и пустая строка - переменная для "склеивания" функции, в который кладутся токены из изначального списка(если в данный момент не собирается функция), либо "приклеиваются" к строке функции, пока есть открытые скобки. Когда функция собрана (все скобки закрыты), переменная кладётся в новый список токенов и очищается. Если функция не собрана(не все скобки закрыты), возвращается ошибка, иначе возвращается соответствующий список токенов(если не было названий функций - изначальны, иначе - новый).</p>

<h2> Алгоритм перевода в обратную польскую нотацию(функция to_reverse_poland_notation) </h2>
    <p>На вход подаётся список токенов из чисел, скобок и операторов. Создаётся 2 пустых списка - итоговый список и стек. Функция проходит по списку. Если встречается число - кладём его в итоговый список. Если встречается оператор - выталкиваем из стека в итоговый список все операторы с меньшим приоритетом до "\(", затем кладём оператор в стек. Если встречается "(" - кладём её в стек. Если встречается ")" - выталкиваем все оператопы из стека до "\(", затем удаляем "\(". После прохода по списку выталкиваем все операторы из стека в итоговый список. Если в итоговом списке есть "\(" - выдаём ошибку, иначе возвращаем итоговый список.</p>

<h2> Алгоритм вычисления обратной польской нотации(функция calc) </h2>
    <p>На вход подаётся список токенов операторов и чисел. Функция создаёт пустой итоговый список, проходит по списку токенов и кладёт числа в итоговый список, если встречает число, и вытаскивает числа из итогового списка и кладёт в него результат операции, если встречает оператор. Затем возвращает число - решение выражения, или ошибку.</p>

<h2> Алгоритм объявления переменной(функция let) </h2>
    <p>На вход подаётся строка с командой let в начале и режим работы калькулятора(инфиксный/постфиксный). Проверяется соответствие строки шаблону "let {name} = {value}". После проверяется соответствие имени переменной правилам Python(только буквы, цифры и нижнее подчёркивание, переменная не должна начинаться с цифр и совпадать с названием функций). Затем проверяется значение переменной на математическую корректность(значение должно быть числом или выражением без переменных). Если переменная проходит все проверки, она добавляется в глобальный словарь(заменяет значение существующей переменной с таким же названием)(в словаре хранятся только результаты выражений переменных).</p>
